import os
import psutil
from datetime import datetime

log_file = "/var/log/sys_health.log"

def log_message(message):
    with open(log_file, "a") as f:
        f.write(f"{datetime.now()} - {message}\n")

cpu = psutil.cpu_percent(interval=1)
memory = psutil.virtual_memory().percent

log_message(f"CPU: {cpu}%, Memory: {memory}%")

if cpu > 80:
    log_message("WARNING: High CPU usage!")

if memory > 85:
    log_message("WARNING: High Memory usage!")

print("System health checked and logged!")

